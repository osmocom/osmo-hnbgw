digraph G {
rankdir=TB
labelloc=t; label="SCCP/SS7 use in OsmoHNBGW"

	subgraph cluster_ss0 {
		label=""
		ss0 [label="cs7 instance 0\n local pc: 1.1.1"]
		ss0ab [label="address book"]
		ss0 -> ss0ab

		msc0a [label="2.2.2"]
		ss0ab -> msc0a
	}

	sccp0 [label="hnbgw_sccp_inst for '0'\n .osmo_sccp_instance\n .osmo_ss7_user SSN: RANAP"];
	ss0 -> sccp0 [dir=back]

	msc0 [label="hnbgw_cnlink for IuCS\n .sccp_addr -> 2.2.2"]
	sccp0 -> msc0 [dir=back]
	msc0a -> msc0 [dir=back]

	cs0 [label="UE CS conn\n hnbgw_context_map"]
	cs1 [label="UE CS conn\n hnbgw_context_map"]
	msc0 -> cs0,cs1

	subgraph cluster_ss1 {
		label=""
		ss1 [label="cs7 instance 1\n local pc: 4.4.4"]
		ss1ab [label="address book"]
		ss1 -> ss1ab

		sgsn0a [label="3.3.3"]
		ss1ab -> sgsn0a
	}

	sccp1 [label="hnbgw_sccp_inst for '1'\n .osmo_sccp_instance\n .osmo_ss7_user SSN: RANAP"];
	ss1 -> sccp1 [dir=back]

	sgsn0 [label="hnbgw_cnlink for IuPS\n .sccp_addr -> 3.3.3"]
	sccp1 -> sgsn0 [dir=back]
	sgsn0a -> sgsn0 [dir=back]

	ps0 [label="UE PS conn\n hnbgw_context_map"]
	ps1 [label="UE PS conn\n hnbgw_context_map"]
	sgsn0 -> ps0,ps1

	subgraph cluster_sccp_inst {
		label="global sccp_instances (llist)"
		sccp0
		sccp1
	}

	subgraph cluster_hnbgw {
		label="global hnb_gw"
		msc0
		sgsn0
	}
}
